<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dian.mmall.dao.releaseDao.GrainAndOilMapper">
    <select id="checkReleaseCount" resultType="int">
        select count(*) from shang_grainandoil where userId=#{userId}  and isDelete=1
    </select>
    
    
     <insert id="caeateGrainAndOil"  >
        insert into shang_grainandoil (
            userId, numberOfChecks, commodityName, brand, placeOfOrigin,
            specifications,price,priceEffectiveStart,priceEffectiveEnd,remarks,
            pictureUrl,isReceivingPurchase,permissionid,commoditytype,approval_status,
            approval_failure,createTime,updateTime,isDelete
        ) values (
            #{userId}, #{numberOfChecks}, #{commodityName}, #{brand}, #{placeOfOrigin},
             #{specifications}, #{price},#{priceEffectiveStart},#{priceEffectiveEnd},#{remarks},
       #{pictureUrl},#{isReceivingPurchase},#{permissionid},#{commoditytype},#{approval_status},
       #{approval_failure},#{createTime},#{updateTime},#{isDelete}
        )
    </insert>
    
    
    
    <!-- 查询总数  isDelete=1 正常    approval_status=2  审批通过-->
     <select id="getGrainAndOilPageno" resultType="int">
        select count(*) from shang_grainandoil where isDelete=1  and approval_status=2
    </select>
    
      <!-- 查询总数  isDelete=1 正常    approval_status=2  审批通过-->
    
    <select id="getGrainAndOilList" resultType="com.dian.mmall.pojo.commodity.GrainAndOil">
        select * from shang_grainandoil where isDelete=1  and approval_status=2
        limit #{currentPage}, #{pageSize}
    </select>
    
   
</mapper>