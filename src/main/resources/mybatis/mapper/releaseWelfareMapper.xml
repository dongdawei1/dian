<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dian.mmall.dao.releaseDao.ReleaseWelfareMapper">
    <select id="countReleaseWelfare" resultType="int">
        select count(*) from release_welfare where userId=#{userId}  and welfareStatus!=3
    </select>
    
    
        <!--审批分页总条数  --> 
        <select id="getReleaseWelfarePageno"  resultType="long">
        select count(*) from release_welfare where welfareStatus=4  
                <if test="userName!=null and userName.trim()!=''">and  userName=#{userName}   </if>
        <if test="contact!=null and contact.trim()!=''">and  contact=#{contact}   </if>   
    
    </select>
           <!--分页待审批 --> 
        <select id="getReleaseWelfareAll"  resultType="com.dian.mmall.pojo.zhiwei.ReleaseWelfare">
        select * from release_welfare where welfareStatus=4   
        <if test="userName!=null and userName.trim()!=''">and  userName=#{userName}   </if>
        <if test="contact!=null and contact.trim()!=''">and  contact=#{contact}   </if>
        limit #{pageLength}, #{pageSize}
    </select>
    

              <!--用户查询分页总条数  --> 
        <select id="get_position_list_no"  resultType="long">
        select count(*) from release_welfare where welfareStatus!=3 and userId=#{userId}   
            <if test="position!=null and position.trim()!=''">and  position=#{position}   </if>
        <if test="welfareStatus!=null">and  welfareStatus=#{welfareStatus}   </if>  
    </select> 
    
       <!--用户查询分页--> 
        <select id="get_position_list_all"  resultType="com.dian.mmall.pojo.zhiwei.ReleaseWelfare">
        select id, userId,position ,number,welfare,salary,education,experience,describeOne,introductoryAward,gender,age,email,welfareStatus,isPublishContact, createTime,updateTime,
workingAddress,authentiCationStatus,authentiCationFailure,termOfValidity,contact from release_welfare where welfareStatus!=3 and userId=#{userId} 
        <if test="position!=null and position.trim()!=''">and  position=#{position}   </if>
        <if test="welfareStatus!=null">and  welfareStatus=#{welfareStatus}   </if>  
        limit #{pageLength}, #{pageSize}
    </select>
    
    
    <!-- 审核  -->  
    
       <update id="examineReleaseWelfare" >
       update release_welfare set  
       authentiCationStatus=#{authentiCationStatus},authentiCationFailure=#{authentiCationFailure},examineTime=#{examineTime},examineName=#{examineName},
       welfareStatus=#{welfareStatus}
        where userId=#{userId}  and id=#{id}
    </update>
    
    
       <!--创建用户成功返回非0  -->
     <insert id="create_position"  >
        insert into release_welfare (
            userId, userName, position, number, salary,welfare,education,
            experience,describeOne,introductoryAward,gender,age,email,
            welfareStatus,isPublishContact,createTime,updateTime,workingAddress,
            authentiCationStatus,addressConsistency,
            detailed,addressDetailed,contact,consigneeName,userType,termOfValidity
        ) values (
            #{userId}, #{userName}, #{position}, #{number}, #{salary},#{welfare},
            #{education},#{experience},#{describeOne},#{introductoryAward},#{gender},#{age},#{email},
            #{welfareStatus},#{isPublishContact},#{createTime},#{updateTime},
            #{workingAddress}, #{authentiCationStatus},#{addressConsistency},
            #{detailed},#{addressDetailed},#{contact},#{consigneeName},#{userType},#{termOfValidity}
        )
    </insert>

   
</mapper>